{
  "script": {
    "lang": "mustache",
    "source": {
      "query": {
        "bool": {
          "should": [
            {
              "prefix": {
                "{{key}}": {
                  "value": "{{query}}",
                  "boost": 30
                }
              }
            },
            {
              "term": {
                "{{key}}.jamo_ngram": {
                  "value": "{{query_jamo}}",
                  "boost": 3
                }
              }
            },
            {
              "term": {
                "{{key}}.jamo_edge_ngram": {
                  "value": "{{query_jamo}}",
                  "boost": 2
                }
              }
            },
            {
              "term": {
                "{{key}}.jamo_edge_ngram_back": {
                  "value": "{{query_jamo}}",
                  "boost": 1
                }
              }
            }
          ]
        }
      },
      "suggest": {
        "spell-suggestion": {
          "text": "{{query}}",
          "term": {
            "field": "{{key}}.spell"
          }
        }
      },
      "sort": [
        {
          "_score": "desc"
        }
      ]
    }
  }
}
